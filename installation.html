<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>PSVM by obdg</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <style type="text/css">
      .file_name {
        color: #1e6bb8
      }
    </style>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name" style="cursor:pointer" onclick="window.location.href='index.html'">PSVM</h1>
      <h2 class="project-tagline">Parallelizing Support Vector Machines on Distributed Computers</h2>
      <a href="https://github.com/obdg/psvm" class="btn">View on GitHub</a>
      <a href="https://github.com/obdg/psvm/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/obdg/psvm/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>Installation</h1><hr>
      <p>
        In order to run PSVM, you should install:
        <ul>
          <li><a href="#gcc_setup">GCC</a></li>
          <li><a href="#mpi_setup">MPI library</a></li>
          <li><a href="#psvm_setup">PSVM</a></li>
        </ul>
        We use <b>Ubuntu 12.04</b> (or above) for the following examples. It should works with other Linux distribution as well. 
      </p>
      <p>
      If you wish to run PSVM parallelly, please follow <a href="#cluster_setup">How to set up cluster environment</a> as well.
      </p>

      <h2 id="gcc_setup">GCC Setup</h2><hr>
      <p>
        To be able to compile source code of MPI in the next step, you need to install GCC compiler on your computer.
        <pre><code>sudo apt-get install build-essential</code></pre>
      </p>


      <h2 id="mpi_setup">MPI library Setup</h2><hr>
      <p>
      Parallel infrastructure is based on MPI. <a href="http://www.mpich.org/">mpich</a> should be installed before running PSVM. You can download the latest version from <a href="http://www.mpich.org/downloads/">here</a>.
        <pre><code>tar xvf mpich-3.2.tar.gz && cd mpich-3.2
./configure
make
sudo make install</code></pre>
      </p>

      <h2 id="psvm_setup">PSVM Setup</h2><hr>
      <p>
        The code of PSVM is avaliable at: <a href="https://github.com/obdg/psvm">https://github.com/obdg/psvm</a>. Either clone the repo or download the compressed file.
        <pre><code>git clone https://github.com/obdg/psvm.git</code></pre>
      </p>
      <p>
        The folder structure is:
        <ul>
          <li><font class="file_name">src:</font> <i>source code of svm</i></li>
          <li><font class="file_name">data:</font> <i>training and testing data</i></li>
          <li><font class="file_name">docker:</font> <i>Dockerfile and scripts</i></li>
          <li><font class="file_name">Makefile</font></li>
          <li><font class="file_name">Readme.md</font></li>
        </ul>
      </p>
      <p>
        Compile PSVM on your computer using make:
          <pre><code>make</code></pre>
          After that, binary files <font class="file_name">svm_train</font> and <font class="file_name">svm_predict</font> are generated.
      </p>
      <p>
        Next step, train a sample model by PSVM using testing dataset, and then predict the result using the model:
        <pre><code>./svm_train -rank_ratio 0.1 -kernel_type 2 -hyper_parm 1 -gamma 0.01 data/splice
./svm_predict data/splice.t</code></pre>
      </p>
      <p>
        Finally, if you can get information same as below:
<pre>========== Predict Accuracy ==========
Accuracy          : 0.864368
Positive Precision: 0.875899
Positive Recall   : 0.861185
Negative Precision: 0.852305
Negative Recall   : 0.867816</pre>
Congratulations! PSVM is successfully installed on your computer.
      </p>

      <h2 id="cluster_setup">Cluster Setup</h2><hr>
      <p>
        To utilize parallel property of PSVM, you need to set up a cluster environment. In this part, we will build up the cluster step by step.<br>
        Assume we have 4 nodes with these host names: master, node0, node1, node2.
        <h3>1. Define hostnames in /etc/hosts</h3>
        <p>Assuming we have the following network environment: </p>
<pre>
#<span class="file_name">/etc/hosts</span>
127.0.0.1     localhost
192.168.133.100 master
192.168.133.101 node0
192.168.133.102 node1
192.168.133.103 node2</pre>
        </p>
        <h3>2. Create account</h3>
        <p>
          You need to create account with same username across all computers like this:
          <pre><code>sudo adduser psvmer</code></pre>
        </p>
        <h3>3. Create shared directory among the cluster</h3>
        <p>
          To parallelly run PSVM on cluster, the binary files <font class="file_name">svm_train</font> and <font class="file_name">svm_predict</font> should be synced among all computers. To this end, we use NFS service on the master node to share a directory containing binary files with other slave nodes.
          <p>
            <p>First, install NFS on each computer.</p>
            For master node:
            <pre><code>sudo apt-get install nfs-server</code></pre>
            For slave node:
            <pre><code>sudo apt-get install nfs-client</code></pre>
          </p>
          <p>
            Second, share directory across computers.
            <pre><code>mkdir /home/psvmer/shared_dir</code></pre>
            On master node do like this:
            <pre><code><li>echo "/home/psvmer/shared_dir * (rw, sync)" | sudo tee -a /etc/exports</li><li>sudo service nfs-kernel-server restart</li></code></pre>
            After that, on each slave node, mount the shared directory:</li>
            <pre><code>sudo mount master:/home/psvmer/shared_dir /home/psvmer/shared_dir</code></pre>
          </p>
        </p>
        <h3>4. Install SSH Server</h3>
        <p>
          On each node:
          <pre><code>sudo apt-get install openssh-server</code></pre>
        </p>
        <h3>5. Set up passwordless SSH Communication from master to slave</h3>
        <p>
          Log in master node with account you have created
          <pre><code>su psvmer</code></pre>
          Generate an RSA key:
          <pre><code>ssh-keygen -t rsa</code></pre>
          Send the key to all slave nodes:
          <pre><code>ssh-copy-id -i ~/.ssh/id_rsa.pub slave-node</code></pre>
        </p>
      </p>
      
    </section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75238565-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
